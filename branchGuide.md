## Git Branch Guide

Git flow 종류 2가지 소개

### 1. Git Flow

![git flow](https://user-images.githubusercontent.com/44635266/66252734-d02af700-e799-11e9-8091-26827db03448.png)

#### 1) 특징

- Matser Branch

가장 중심이 되는 브런치이며, 이 브런치는 현재 사용자들에게 서비스 되고 있는 시스템이라고 생각하면 된다.

- Develop Branch

Master 브런치에서 나오며 개발중인 시스템이다. 현재 Master 브런치에서는 사용자들에게 직접적으로 사용하지만 Develop 브런치는 일반 사용자들이 접근할 수 없다.

- Release Branch

흔히 말해 테스트 서버라고 생각하면 된다. 새로운 Production 릴리즈를 위한 브런치이다. Release 브런치에서 문제가 생기면 다시 Develop 브런치로가서 추가 개발을 하게된다. release 브런치에서는 버그 픽스에 대한 부분만 커밋하고, 릴리즈가 준비되었다고 생각하면 master로 merge를 진행한다.

- Feature Branch

Develop 브런치에서 나오며, 새로운 기능을 추가하는 브런치이다. 예를 들어 웹 사이트를 만들게 되면 login 기능, 메뉴 선택기능, 게시판 글쓰기 기능과 같이 모듈 단위로 추가가 된다.

- Hotfix Branch

Master 브런치에서 생긴 긴급한 오류를 해결할 때 Hotfix 브런치로 이동이 된다. 이미 유저들에게 서비스가 되고 있는데 발생한 오류라 최대한 빨리 해결할 때 브런치를 사용한다. 하지만, 큰 문제라 오랜 시간이 걸리는 경우 Develop 브런치로 합쳐 해결하게 된다.

#### 2) 장단점

장점

협업시 발생할 수 있는 문제를 최소화 할 수 있음 

웬만한 에디터와 IDE에는 플러그인으로 존재함

단점

브랜치가 많아 복잡함

사용하지 않는 브랜치가 있음

### 2. Github Flow

Scott chacon은 GitHub Flow에서 Git flow가 좋은 방식이긴 하지만 GitHub에서 사용하기에는 복잡하다 여겨 사용하지 않고 GitHub Flow라는 내용으로 사용을 하고 있다고 한다. 그리고 자동화의 개념이 들어가 있으며, 자동화가 안되어있는 곳에서는 수동으로 관련 작업을 진행하면 된다. 흐름이 단순한 만큼 룰도 단순하다. master 브랜치에 대한 role만 정확하다면 나머지 브랜치들에는 관여를 하지 않는다. 그리고 pull request 기능을 사용하도록 권장을 한다.

![github flow](http://cdn-ak.f.st-hatena.com/images/fotolife/s/shoma2da/20151104/20151104223339.png)

#### 1) 특징

release 브랜치가 명확하지 않은 시스템에서 사용에 맞게 되어있다. 여기에는 GitHub의 서비스 특성상. 릴리즈라는 개념이 없는 서비스를 진행하고 있어서 그런 것으로 보이며, 웹 서비스들이 릴리즈라는 개념이 없이지고 있으니 사용하기 편할 것으로 보인다. hotfix와 가장 작은 기능을 구분하지 않는다. 어차피 둘 다 개발자가 수정해야 되는 일중에 하나이다. 단지 우선순위가 어디가 높냐라는 단계이다.

1. master 브랜치는 어떤 때든 배포가 가능하다. master 브랜치는 항상 최신의 상태이며, stable 상태로 Product에 배포되는 브랜치이다. 그리고 이 브랜치에 대해서는 엄격한 role를 주어 사용한다.

2. 새로운 일을 시작하기 위해 브랜치를 master에서 딴다면 이름은 어떤 일을 하는지 명확하게 작성한다. git flow 와는 다르게 feature 브랜치나 develop 브랜치가 존재하지 않는다. 그렇기에 새로운 기능을 추가하거나 버그를 해결하기 위한 브랜치의 이름은 자세하게 어떤 일을 하고 있는지에 대해서 작성해주도록 하자. Github 페이지에서 보면 어떤 일들이 진행되고 있는지를 확인하기 쉽게 말이다.

3. 원격지 브랜치로 수시로 push를 한다. git flow 와 가장 상반되는 방식이다. 항상 원격지에 자신이 하고 있는 일들을 올려 다른 사람들도 확인할 수 있도록 해준다. 이 방법의 좋은 점은 하드웨어에 문제가 발생하여 작업하던 부분이 없어지더라도 원격지에 있는 소스를 받아서 작업을 할 수 있도록 해준다.

4. 피드백이나 도움이 필요할 때, 그리고 머징 준비가 완료되었을 때는 pull request를 생성한다. pull request 는 코드 리뷰를 도와주는 시스템이다. 그렇기에 이것을 이용하여 자신의 코드를 공유하고, 리뷰를 받을 수 있도록 한다. 물론 머지가 준비 완료되어 master 브랜치로 반영을 요구하여도 된다.

5. 기능에 대한 리뷰와 사인이 끝난 후 master로 머지한다. 곧장 product로 반영이될 기능이기에 이해관계가 연결된 사람들과 충분한 논의 이후 반영하도록 한다.

6. master로 머지되고 푸시되었을 때는 즉시 배포되어야 한다. GitHub Flow의 핵심인듯한 master로 머지가 일어나면 hubot을 이용하여 자동으로 배포가 되도록 설정해놓는다.

#### 2) 장단점

장점

브랜치 전략이 단순

처음 git을 접하는 사람에게 정말 좋은 시스템 

Github 사이트에서 제공하는 기능을 모두 사용하여 작업을 진행코드 리뷰를 자연스럽게 사용할 수 있음

CI가 필수적이며, 배포는 자동으로 진행할 수 있음 

Github가 작업을 할 때 이렇게 작업하고 있음


단점

CI와 배포 자동화가 되어있지 않은 시스템에서는 사람이 관련된 업무를 진행함

많은 pull request가 올라오기 시작하면 관리하기가 어려움

참조

- [Git Branch 전략 종류](https://ujuc.github.io/2015/12/16/git-flow-github-flow-gitlab-flow/)
- [Git flow 특징](https://woowabros.github.io/experience/2017/10/30/baemin-mobile-git-branch-strategy.html)
